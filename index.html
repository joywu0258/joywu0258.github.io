<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Ashley的个人博客空间</title><meta name="author" content="joywu"><meta name="copyright" content="joywu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="余生有你,幸莫大焉">
<meta property="og:type" content="website">
<meta property="og:title" content="Ashley的个人博客空间">
<meta property="og:url" content="http://ashleyye.top/index.html">
<meta property="og:site_name" content="Ashley的个人博客空间">
<meta property="og:description" content="余生有你,幸莫大焉">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png">
<meta property="article:author" content="joywu">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://ashleyye.top/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":false,"top_n_per_article":1,"unescape":false,"languages":{"hits_empty":"找不到您查询的内容：${query}","hits_stats":"共找到 ${hits} 篇文章"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Ashley的个人博客空间',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2023-06-28 12:30:38'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="/css/background.css"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="full_page" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Ashley的个人博客空间"><span class="site-name">Ashley的个人博客空间</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fa fa-graduation-cap"></i><span> 博文</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/categories/"><i class="fa-fw fa fa-archive"></i><span> 分类</span></a></li><li><a class="site-page child" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></li><li><a class="site-page child" href="/archives/"><i class="fa-fw fa fa-folder-open"></i><span> 归档</span></a></li></ul></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> 生活</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/shuoshuo/"><i class="fa-fw fa fa-comments-o"></i><span> 分享</span></a></li><li><a class="site-page child" href="/photos/"><i class="fa-fw fa fa-camera-retro"></i><span> 相册</span></a></li><li><a class="site-page child" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 影视</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/links/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fa fa-paper-plane"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于笔者</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="site-info"><h1 id="site-title">Ashley的个人博客空间</h1><div id="site-subtitle"><span id="subtitle"></span></div><div id="site_social_icons"><a class="social-icon" href="https://gitee.com/wzl0258" target="_blank" title="Gitee"><i class="fab fa-github"></i></a></div></div><div id="scroll-down"><i class="fas fa-angle-down scroll-down-effects"></i></div></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2023/06/24/hello-world/" title="测试！！！！！">测试！！！！！</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2023-06-24T10:00:00.000Z" title="发表于 2023-06-24 18:00:00">2023-06-24</time></span></div><div class="content">测试测试
</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2021/03/24/Typora%E7%94%A8%E6%B3%95%E4%BB%8B%E7%BB%8D/" title="markdown书写工具-Typora">markdown书写工具-Typora</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2021-03-24T14:00:03.000Z" title="发表于 2021-03-24 22:00:03">2021-03-24</time></span></div><div class="content">Typora用法介绍[TOC]
标题的写法123一级标题: 可以直接输入 # 一级标题; &quot;#&quot;后面有个空格的，也可以ctrl+1二级标题: 可以直接输入 ## 一级标题; &quot;##&quot;后面有个空格的，也可以ctrl+2依次这样的.....

分割线1采用 --- 来实现 英文的

需要突出的字段
斜体  效果:    斜体

1采用 *你要显示的内容*  


粗体  效果:   粗体

1采用 **你要显示的内容**  


斜粗体  效果:   斜粗体

1采用 ***你要显示的内容*** 


删除线  效果:    我中间被画了一条线

1采用 ~~你想划掉的部分~~  或者 alt+shift+5 


下划线  效果:   我这是下划线

1&lt;u&gt;使用Ctrl+U可以实现下划线，或者在文本的两边加上一个HTML标签u。&lt;/u&gt;


脚注  效果：我是^DYL


123# 添加文本后[^DYL]: dyl 当这个你下面没有把脚注补充完整的时候 他会提示你，这个时候你只需要点击他的提示 他就会帮你补充完整如下图

 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/04/02/ioc%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3/" title="IOC个人总结">IOC个人总结</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-04-02T10:00:00.000Z" title="发表于 2020-04-02 18:00:00">2020-04-02</time></span></div><div class="content">Spring Ioc 个人总结IOC思想 inversion of control 控制反转：
   大部分的定义就是：构造对象的权利被反转，原先我们自己主动创建对象调用构造方法传参，现在我们依赖于工厂或者说依赖于某一个容器，将对象构造的权利交给其他对象，构造对象的权利被反转了。说白了也就一句话：将创建对象的权力交由Ioc容器来完成。   在springioc中最常见的问题是对注解的不了解，也就导致了对bean认知不够到位，当热我也是菜鸡，这里也只是分享了自己的想法。   谈ioc之前，先说说mybatis的一些问题。先上代码（configuration.xml文件）：
1234567891011121314151617181920212223  &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;!DOCTYPE configuration  PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;  &quot;http://mybatis.org/ ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/25/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E4%BA%94%E4%B9%8B%20ReentrantLock%E7%AF%87/" title="多线程与高并发五之 ReentrantLock篇">多线程与高并发五之 ReentrantLock篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-25T06:25:56.000Z" title="发表于 2020-03-25 14:25:56">2020-03-25</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">多线程与高并发五之 ReentrantLock篇一、前言ReentrantLock 是基于 AQS 实现的同步框架，关于 AQS 的源码在 这篇文章 已经讲解过，ReentrantLock 的主要实现都依赖AQS，因此在阅读本文前应该先了解 AQS 机制。本文并不关注 ReentrantLock 如何使用，只叙述其具体实现。
二、ReentrantLock 的继承体系以及特点AQS 是基于模板方法模式设计的，理解该设计模式可以帮助阅读 ReentrantLock 源码，当然不熟悉该设计模式并不影响下文的阅读。首先我们来看 ReentrantLock 的类结构，该类实现了 Lock 接口，该接口定义了一些需要实现的方法，这些方法是提供给应用程序员编写并发程序使用时的 API。ReentrantLock 如何提供这些 API的支持则依赖 AQS 框架，在其内部定义了一个类 Sync ，在 AQS 一文中提到过要使用 AQS 构建同步工具，主要是实现自己的 tryAccquire 和 tryRealease 方法，Sync 类即是 AQS 的模板方法具体实现，对加锁解锁方法进行了重新实现，但 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/16/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E5%9B%9B%E4%B9%8BJava%E4%B8%AD%E6%96%AD%E6%9C%BA%E5%88%B6/" title="多线程与高并发四之Java中断机制">多线程与高并发四之Java中断机制</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-16T11:38:15.000Z" title="发表于 2020-03-16 19:38:15">2020-03-16</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">多线程与高并发四之Java中断机制前言我们首先介绍中断的三个 APPI 及其底层代码，在对方法的实现有了清晰的认知后，再结合场景谈谈什么是中断，以及中断该如何正确使用？
一、中断方法1. isInterrupted1234public boolean isInterrupted() &#123;      // 调用isInterrupted 方法，中断标记设置为 true        return isInterrupted(false);    &#125;

这个方法很简单，就是返回当前线程的中断标记值，这个方法是由 native 方法实现。
123456/**     * Tests if some Thread has been interrupted.  The interrupted state     * is reset or not based on the value of ClearInterrupted that is     * passed.     */    private native boolean isInterrupted(boolean C ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/10/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E4%B8%89%E4%B9%8BAQS%20%E5%8E%9F%E7%90%86%E6%8E%A2%E7%B4%A2/" title="多线程与高并发三之AQS 原理探索">多线程与高并发三之AQS 原理探索</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-10T12:05:34.000Z" title="发表于 2020-03-10 20:05:34">2020-03-10</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">多线程与高并发三之AQS 原理探索一、前言AQS 是一个同步框架，关于同步在操作系统篇 中对进程同步做了些概念性的介绍，我们了解到进程（线程同理，本文基于 JVM 讲解，故下文只称线程）同步的工具有很多：Mutex、Semaphore、Monitor。但是Mutex 和 Semaphore 作为低级通信存在不少缺点，Monitor 机制解决了上面部分缺憾，但是仍然存在问题，AQS 的出现很好的解决了这些问题。
二、其他同步工具的缺点Mutex
Mutex 只有两种状态，锁定和非锁定，无法表示临界区的可用资源数量（计数信号量可解决）。
使用复杂，使用不当易造成死锁

Semaphore
Mutex 只允许一个线程访问临界资源， Semaphore 允许一定数量的线程访问共享资源。但是 Semaphore 中没有 Owner，无法知道当前获取锁的线程是谁。
使用复杂，使用不当易造成死锁，P V 操作需要配对使用，分散在代码各处增大了编码难度。

MonitorMonitor 解决了上述几个问题，但在 HotSpot 中底层是基于 Mutex 做的线程同步，在 1.6 之前且还没有进行优化， ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/08/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%88%9D%E6%AD%A5%E6%95%B4%E7%90%86/" title="操作系统初步整理">操作系统初步整理</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-08T08:39:43.000Z" title="发表于 2020-03-08 16:39:43">2020-03-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">操作系统初步整理前言下一篇章打算讲解 AQS ，在去熟悉 AQS 原理之前，我想我们得知道一个事物是因何而产生，它出现的动机；AQS 作为一种高级的同步机制，讨论 AQS 则避免不了谈及操作系统以及 Java 实现的其他同步机制，正是因为其他同步机制存在一些缺陷或是限制才会有 AQS；由于同步机制的篇幅并不短，因此单独开一文进行阐述。
概念介绍临界区
Consider a system consisting of n processes {P0, P1, …, Pn−1}. Each process has a segment of code, called a critical section, in which the process may be accessing — and updating — data that is shared with at least one other process.

当多个进程访问（包含线程，此文以进程来讲解，后续只说进程）共享资源时，这些进程访问共享资源的代码就称作临界区。临界区的关键是在同一时刻只能有一个进程执行临界区。
临界资源在同一 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/05/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E4%BA%8C%E4%B9%8BSynchronized%E5%8A%A0%E9%94%81%E8%A7%A3%E9%94%81%E7%AF%87/" title="多线程与高并发二之Synchronized加锁解锁篇">多线程与高并发二之Synchronized加锁解锁篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-05T13:32:06.000Z" title="发表于 2020-03-05 21:32:06">2020-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">多线程与高并发二之Synchronized加锁解锁篇前言上篇主要对 Synchronized 的锁实现原理 Monitor 机制进行了介绍，由于 Monitor 基于操作系统调用，上下文切换导致开销大，在竞争不激烈时性能不算很好， 在 jdk6 之后进了系列优化。前文对优化措施进行了简单介绍，下面将一一介绍这些优化的细节，行文思路大致如下：

从重量级锁的优化开始讲，一是自旋锁，二是尽量避免进入 Monitor ,即使用轻量级锁
讲解轻量级锁及加锁解锁流程
轻量级锁在没有竞争时，每次重入仍然需要执行cas操作，为解决这个问题，因而产生了偏向锁
详细介绍偏向锁

Synchronized 锁的细节一、自旋锁自旋锁比较简单，逻辑在上篇也已经进行过阐述，这一篇章我们着重看下它的性能如何？在竞争度较小的时候，重量级锁的上下文切换导致的开销相对于 CPU 处理任务的时间占比较重，此种情况下，自旋锁的性能有优势，因自旋而导致的 CPU 浪费在可接受范围内；当竞争激烈的时候，继续使用自旋锁则得不偿失，性能上比直接使用重量级锁要差，大量的等待锁的时间被浪费。根据任务处理时间不同，自旋锁表现也不一，在任 ...</div></div></div><div class="recent-post-item"><div class="recent-post-info no-cover"><a class="article-title" href="/2020/03/02/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E4%B8%80%E4%B9%8BSynchronized%E7%90%86%E8%A7%A3%E7%AF%87/" title="多线程与高并发一之Synchronized理解篇">多线程与高并发一之Synchronized理解篇</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time datetime="2020-03-02T14:13:08.000Z" title="发表于 2020-03-02 22:13:08">2020-03-02</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/">技术</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/">学习</a></span></div><div class="content">多线程与高并发一之Synchronized理解篇一、 什么是锁？在多线程中，多个线程同时对某一个资源进行访问，容易出现数据不一致问题，为保证并发安全，通常会采取线程互斥的手段对线程进行访问限制，这个互斥的手段就可以称为锁。锁的本质是状态+指针，当一个线程进入临界区前需要先修改状态，表明已加锁，并且指针指向加锁的线程。后续线程在进入临界区时同样需要尝试修改状态，修改状态前首先检查指针是否为空，如果不为空且指向其他线程则表明已经有其他线程占用了锁，则无法进行状态修改，也就是此线程获取锁失败。
二、 Synchronized 锁原理Synchronized 关键字如何实现同步互斥？一、生成字节码首先了解 Synchronized 的三种用法：

锁对象实例
锁方法实例以上三种不同的使用方式，JVM 生成的字节码也不同，具体如下：


锁对象实例12Synchronized(this) &#123;&#125;
通过 反编译生成的字节码可看到，生成了字节码指令 monitorenter 和 monitorexit；当代码执行到monitorenter时加锁，执行monitorexit时解锁。E ...</div></div></div><nav id="pagination"><div class="pagination"><span class="page-number current">1</span></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://i.loli.net/2021/02/24/5O1day2nriDzjSu.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">joywu</div><div class="author-info__description">余生有你,幸莫大焉</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">9</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">11</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">2</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://gitee.com/wzl0258"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://gitee.com/wzl0258" target="_blank" title="Gitee"><i class="fab fa-github"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2023/06/24/hello-world/" title="测试！！！！！">测试！！！！！</a><time datetime="2023-06-24T10:00:00.000Z" title="发表于 2023-06-24 18:00:00">2023-06-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2021/03/24/Typora%E7%94%A8%E6%B3%95%E4%BB%8B%E7%BB%8D/" title="markdown书写工具-Typora">markdown书写工具-Typora</a><time datetime="2021-03-24T14:00:03.000Z" title="发表于 2021-03-24 22:00:03">2021-03-24</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/04/02/ioc%E7%9A%84%E4%B8%AA%E4%BA%BA%E7%90%86%E8%A7%A3/" title="IOC个人总结">IOC个人总结</a><time datetime="2020-04-02T10:00:00.000Z" title="发表于 2020-04-02 18:00:00">2020-04-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/03/25/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E4%BA%94%E4%B9%8B%20ReentrantLock%E7%AF%87/" title="多线程与高并发五之 ReentrantLock篇">多线程与高并发五之 ReentrantLock篇</a><time datetime="2020-03-25T06:25:56.000Z" title="发表于 2020-03-25 14:25:56">2020-03-25</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2020/03/16/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E4%B8%8E%E9%AB%98%E5%B9%B6%E5%8F%91%E5%9B%9B%E4%B9%8BJava%E4%B8%AD%E6%96%AD%E6%9C%BA%E5%88%B6/" title="多线程与高并发四之Java中断机制">多线程与高并发四之Java中断机制</a><time datetime="2020-03-16T11:38:15.000Z" title="发表于 2020-03-16 19:38:15">2020-03-16</time></div></div></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/"><span class="card-category-list-name">技术</span><span class="card-category-list-count">6</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/%E6%8A%80%E6%9C%AF/%E5%AD%A6%E4%B9%A0/"><span class="card-category-list-name">学习</span><span class="card-category-list-count">6</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/%E6%B5%8B%E8%AF%95/" style="font-size: 1.1em; color: #999">测试</a> <a href="/tags/%E7%BA%BF%E7%A8%8B%E6%B1%A0/" style="font-size: 1.5em; color: #99a9bf">线程池</a> <a href="/tags/%E5%A4%9A%E7%BA%BF%E7%A8%8B/" style="font-size: 1.5em; color: #99a9bf">多线程</a> <a href="/tags/ReentrantLock/" style="font-size: 1.1em; color: #999">ReentrantLock</a> <a href="/tags/AQS/" style="font-size: 1.3em; color: #99a1ac">AQS</a> <a href="/tags/Synchronized/" style="font-size: 1.3em; color: #99a1ac">Synchronized</a> <a href="/tags/%E7%BA%BF%E7%A8%8B/" style="font-size: 1.1em; color: #999">线程</a> <a href="/tags/markdown/" style="font-size: 1.1em; color: #999">markdown</a> <a href="/tags/spring-ioc/" style="font-size: 1.1em; color: #999">spring ioc</a> <a href="/tags/%E8%BF%9B%E7%A8%8B/" style="font-size: 1.1em; color: #999">进程</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 1.1em; color: #999">操作系统</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2021/03/"><span class="card-archive-list-date">三月 2021</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/04/"><span class="card-archive-list-date">四月 2020</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2020/03/"><span class="card-archive-list-date">三月 2020</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">9</div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">25.8k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2023-06-28T04:30:37.997Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By joywu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"><script>window.typedJSFn = {
  init: (str) => {
    window.typed = new Typed('#subtitle', Object.assign({
      strings: str,
      startDelay: 300,
      typeSpeed: 150,
      loop: true,
      backSpeed: 50,
    }, ))
  },
  run: (subtitleType) => {
    if (true) {
      if (typeof Typed === 'function') {
        subtitleType()
      } else {
        getScript('https://cdn.jsdelivr.net/npm/typed.js/dist/typed.umd.min.js').then(subtitleType)
      }
    } else {
      subtitleType()
    }
  }
}
</script><script>function subtitleType () {
  if (true) {
    typedJSFn.init(["你在抱怨什么呢","为明天到来的事，说人生像是没有意义","没有选择会是唯一的路","这不是你自己的问题，人终归要好好去生活"])
  } else {
    document.getElementById("subtitle").textContent = "你在抱怨什么呢"
  }
}
typedJSFn.run(subtitleType)</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/canvas-nest.min.js"></script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div class="no-result" id="local-search-results"></div><div id="local-search-stats-wrap"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></div></body></html>